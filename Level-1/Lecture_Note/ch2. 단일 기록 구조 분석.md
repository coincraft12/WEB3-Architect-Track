# 2강. 단일 기록 구조 분석: 검열·변조·단일 장애점이 생기는 이유

## 0) 이 강의의 한 문장
**기록이 하나(단일 장부)라는 건 ‘효율’의 대가로 ‘권력 집중’과 ‘취약성 집중’을 함께 얻는 구조다.**  
WEB3는 “기록을 여러 주체가 공유”하도록 설계해 이 대가를 줄이려는 시도다.

---

## 1) 강의 목표 (수강생이 끝나고 할 수 있어야 하는 것)
이 강의를 마치면 수강생은:

1. 단일 기록(단일 장부) 구조가 낳는 3대 리스크 **검열·변조·단일 장애점(SPOF)** 을 구조적으로 설명한다.  
2. “검열”과 “규제 준수(정당한 통제)”를 **구분**할 수 있다.  
3. “변조”가 단순히 데이터를 고치는 문제가 아니라 **신뢰의 기준점(Truth source)을 바꾸는 문제**임을 이해한다.  
4. 어떤 서비스든 “기록은 누가 쓰는가? 누가 승인하는가? 누가 되돌리는가?”로 **취약점 지도**를 그릴 수 있다.  
5. 다음 강의(분산 신뢰 구조)로 이어지는 질문: “기록을 분산하면 무엇이 좋아지고 무엇이 어려워지는가?”를 말할 수 있다.

---

## 2) 도입 멘트 (강의 시작 2~3분 대본)
> 1강에서 은행이 신뢰를 ‘패키지로 대신’해준다고 했죠.  
> 그중에서도 오늘은 핵심을 하나만 잡겠습니다.  
> **기록(장부)이 하나라는 것**, 이게 왜 그렇게 중요하고 위험한가?  
>  
> 단일 기록은 사실 “편리함의 끝판왕”이에요.  
> 그런데 그 편리함은 동시에 **검열 가능성**, **변조 가능성**, **한 번 멈추면 다 멈추는 구조**를 만들어냅니다.  
> 오늘은 이 3가지를 구조로 해부하겠습니다.

---

## 3) 핵심 개념: “기록은 곧 권력이다”
단일 기록 구조를 이해하려면 “기록 = 메모”라는 수준을 넘어야 한다.  
현대 시스템에서 기록은 다음을 결정한다.

- **소유권(누가 얼마를 가졌는가)**
- **자격(누가 어떤 권한을 가졌는가)**
- **진실(무슨 일이 실제로 일어났는가)**
- **책임(누가 잘못했는가)**

그래서 기록을 관리하는 권한은 곧 권력이다.

---

## 4) 단일 기록 구조(Single Source of Truth)의 정의
단일 기록 구조란 간단히 말해:

- “무슨 일이 있었는지”를 최종적으로 확정하는 장부(데이터베이스)가 **하나**이고,
- 그 장부의 쓰기/수정/승인 권한이 **특정 조직(또는 소수의 운영자)** 에 집중되어 있으며,
- 다른 참여자들은 그 기록을 **조회(read)** 하거나 **요청(request)** 할 뿐, 기록 자체를 공동으로 확정하지 못하는 구조

이 구조는 빠르고 편하다.  
하지만 아래 3가지 리스크가 구조적으로 따라온다.

---

## 5) 리스크 1: 검열(Censorship) — “기록에 들어갈지 말지”를 누가 결정하는가?

### 5.1 검열의 구조적 정의
검열은 단순히 “나쁜 의도로 막는다”가 아니다. 구조적으로는:

- 어떤 트랜잭션/행동/기록 요청이 들어왔을 때  
  **(A) 거부**, **(B) 지연**, **(C) 조건부 허용**  
  중 하나를 ‘기록 운영자’가 결정할 수 있는 능력

즉, **기록의 ‘입구(gate)’를 통제하는 힘**이다.

### 5.2 검열이 나타나는 대표 패턴 3가지
1) **거부(Reject)**: “이 요청은 기록하지 않겠다”  
2) **지연(Delay)**: “지금은 처리하지 않겠다(대기, 보류, 심사)”  
3) **조건부 허용(Conditional)**: “추가 정보/수수료/서류가 있어야 기록한다”

### 5.3 검열 vs 규제 준수(정당한 통제)
여기서 중요한 구분이 있다.

- 규제 준수/리스크 관리: 사기 방지, AML, 법적 의무에 따른 차단  
- 권력 남용/자의적 검열: 불명확한 기준으로 특정 사용자/거래를 차단

구조 설계자 관점의 포인트:
- **둘은 결과가 비슷해 보여도, 기준의 투명성과 이의제기(appeal) 가능성이 다르다.**
- 즉 “검열 자체”보다 “검열 기준이 어디에 있고, 누가 바꿀 수 있는가”가 핵심이다.

### 5.4 실생활 예시
- 결제/송금이 “심사 중”으로 멈춘다  
- 계정이 정지되고 거래 요청이 더 이상 기록되지 않는다  
- 특정 업종/지역/국가/키워드에 따라 거래가 조건부로만 승인된다

---

## 6) 리스크 2: 변조(Tampering) — “기록의 과거가 바뀔 수 있는가?”

### 6.1 변조의 구조적 정의
변조는 “데이터를 고친다”가 아니다. 더 정확히는:

- **과거 기록을 수정하거나**
- **기록의 해석 규칙을 바꾸거나(정책/정산 규칙 변경)**
- **감사 로그를 통제하여 ‘바뀐 사실’ 자체를 숨기는 것**

즉, **진실의 기준점(Truth source)을 흔드는 행위**다.

### 6.2 변조가 가능한 구조적 이유
단일 기록 구조에서는 보통:

- DB 쓰기 권한이 제한된 운영자에게 있고
- 변경 이력(log)이 내부 시스템에만 남거나
- 외부 참여자가 전체 로그를 독립적으로 검증하기 어렵다

그래서 “실제로 바뀌었는지”를 외부가 완전히 증명하기 어렵다.

### 6.3 변조의 대표 형태 3가지
1) **직접 수정**: 기록값 자체를 변경(잔액, 내역, 상태)  
2) **재해석**: 같은 기록이라도 정산 규칙/정책 변경으로 결과가 달라짐  
3) **선택적 공개**: 일부 기록만 보여주고 일부는 숨김(투명성 통제)

구조 설계자 관점의 핵심 문장:
- **변조 가능성은 ‘악의’의 문제가 아니라 ‘권한 구조’의 문제다.**

### 6.4 실생활 예시
- “정책이 바뀌었다”는 말로, 같은 행위의 결과가 달라진다  
- 거래 내역이 일부 누락되어 조회된다(내부 사유)  
- 정산/수수료 규칙이 소급 적용되어 결과가 달라진다(가능/불가능은 제도마다 다르지만, 구조적 위험은 존재)

---

## 7) 리스크 3: 단일 장애점(SPOF) — “한 번 멈추면 모두가 멈춘다”

### 7.1 단일 장애점의 구조적 정의
단일 기록 구조에서 장애는 단순 서버 다운이 아니라:

- 기록 시스템이 멈추면  
  **거래(행동)가 ‘존재하지 않는 것’처럼** 되어버리는 문제다.

왜냐하면 그 시스템이 “진실의 기준점”이기 때문이다.

### 7.2 SPOF가 만들어내는 파급
- 서비스 중단 → 거래 정지 → 경제 활동 정지  
- 복구 지연 → 사용자 불안/손실 확대  
- 재난/침해 → 기록 손상 가능성, 또는 복구 과정에서 신뢰 붕괴

### 7.3 단일 장애점은 공격에도 취약하다
- DDoS, 내부 침해, 운영 실수, 정책 오류 등이  
  곧바로 전체 시스템 리스크로 전이된다.

---

## 8) 칠판/슬라이드 구성(추천 도식)
### 도식 1: 단일 기록 구조
- 사용자들 → (요청) → 중앙 기록 서버/기관 → (조회 결과) → 사용자들  
- 중앙에 “Gate(입구 통제)”, “Edit(수정 권한)”, “Down(장애)” 3개 아이콘 표시

### 도식 2: 리스크 3종 세트
- 검열 = “입구 통제”  
- 변조 = “과거 수정/해석 변경”  
- SPOF = “중앙 다운 = 전체 다운”

---

## 9) 미니 케이스(강의 중 10분 시나리오)
### 케이스: 온라인 결제 서비스(가상의 PayX)
- PayX에서 결제 요청이 “심사 중”으로 멈춤 → **검열/지연**
- 결제 내역이 고객센터 요청 후 일부만 제공됨 → **선택적 공개(투명성 통제)**
- 장애로 2시간 결제가 불가 → **SPOF**
- 정책 변경으로 환불 규칙이 달라짐 → **재해석 리스크**

**강의 포인트**:  
“PayX가 나쁘다/좋다”가 아니라, 구조적으로 이런 현상이 ‘가능한 시스템’이라는 게 중요하다.

---

## 10) WEB3로 연결되는 다리(다음 강의 예고)
단일 기록 구조의 3대 리스크를 줄이기 위해 등장한 아이디어가 “분산 기록”이다.  
하지만 분산하면 새로운 비용이 생긴다.

- 기록을 공유하면 → **속도/비용/복잡도**가 늘어날 수 있다  
- 검열을 줄이면 → **통제/구제(분쟁조정)** 가 어려워질 수 있다  
- 변조를 줄이면 → **업그레이드/정책 변경**이 까다로워질 수 있다

다음 강의에서 다룰 질문:
- 기록을 여러 주체가 함께 확정하려면, 어떤 규칙(합의/검증)이 필요할까?  
- “분산 신뢰”는 무엇을 얻고 무엇을 포기하는가?

---

## 11) 수업 중 던질 질문(토론용)
1) 중앙화 서비스가 거래를 “지연”시키는 건 언제 정당하고 언제 위험한가?  
2) “정책 변경”은 변조인가, 운영인가? 어디가 경계인가?  
3) 단일 장애점을 줄이기 위한 현실적인 방법은 무엇이 있을까? (백업/이중화/감사로그/외부 검증 등)  
4) 기록이 분산되면, 분쟁조정은 더 쉬워질까 어려워질까?

---

## 12) 미니 실습(10~15분) — 취약점 지도 그리기
### 실습 주제: “내가 쓰는 서비스 1개를 3대 리스크 관점으로 진단”
아래 질문에 답하면 된다.

- (검열) 이 서비스는 어떤 조건에서 요청을 거부/지연할 수 있는가?  
- (변조) 기록이 바뀌었는지 사용자가 독립적으로 확인할 수 있는가?  
- (SPOF) 장애가 나면 무엇이 멈추는가? 대체 경로가 있는가?

**출력(산출물)**: “취약점 지도 1장”
- 가운데: 서비스 이름  
- 주변: 검열/변조/SPOF 각각에 대해 ‘가능한 시나리오’ 2개씩

---

## 13) 과제
### 과제 1: 단일 기록 구조 리스크 리포트(1페이지)
- 서비스 2개를 골라서  
  - 검열 시나리오 1개  
  - 변조/재해석 시나리오 1개  
  - SPOF 시나리오 1개  
  를 작성한다.
- 마지막 문장: “이 서비스에서 가장 치명적인 리스크는 무엇이며, 그 이유는 무엇인가?”

### 과제 2(선택): 리스크 완화 아이디어 5개
- 운영/기술/정책 관점에서 “완화책”을 5개 제안한다.  
  예: 공개 감사로그, 외부 감사, 이중화, 투명한 차단 기준, 이의제기 프로세스 등

---

## 14) 강의 마무리 30초 대본
> 단일 기록 구조는 나쁜 구조가 아닙니다.  
> 효율이 엄청나게 좋고, 분쟁조정도 쉬워요.  
> 하지만 그 효율은 **검열 가능성**, **변조 가능성**, **단일 장애점**을 같이 가져옵니다.  
>  
> 다음 강의에서, 이 리스크를 줄이기 위해 등장한 “분산 신뢰 구조”를  
> 합의·실행·검증 관점에서 분해해보겠습니다.

---

## 15) 퀴즈(7문항, 복습용)
1) 단일 기록 구조의 3대 리스크를 쓰시오.  
2) 검열을 구조적으로 정의하면 무엇인가? (거부/지연/조건부 허용)  
3) “검열”과 “규제 준수”를 구분하는 핵심 기준 1가지를 쓰시오.  
4) 변조가 단순 수정 이상의 의미를 갖는 이유는 무엇인가?  
5) 재해석(정책 변경) 리스크는 왜 발생하는가?  
6) SPOF가 서비스 중단 이상의 문제인 이유는 무엇인가?  
7) 단일 기록 구조 리스크를 줄이기 위한 완화책 2개를 쓰시오.

---

## 16) (집필 확장용) 이 강의를 책으로 옮기면 이렇게 된다
- 1. 기록은 왜 권력인가  
- 2. 단일 기록 구조의 장점(효율/구제/관리)  
- 3. 검열: 입구를 통제하는 힘  
- 4. 변조: 과거를 바꾸는 힘(또는 해석을 바꾸는 힘)  
- 5. 단일 장애점: 멈추면 모두가 멈추는 구조  
- 6. 실전 리포트: 내가 쓰는 서비스 취약점 지도 그리기  
- 7. 다음 장 예고: 분산 신뢰는 무엇을 해결하고 무엇을 포기하는가
